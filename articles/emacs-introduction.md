---
title: "Emacsの良いところ"
emoji: "🐿️"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["Emacs"]
published: true
publication_name: optimind
---

最近ふと会社で「Emacsの紹介をしてほしい」と依頼を受けました。私は大学時代からかれこれ10年くらいEmacsを使っていますが、好き嫌いがはっきり出そうなツールなのであまり他人にEmacsを強く推薦することはありませんでした。しかし紹介を依頼されて、たしかにどんな知識も知らないというのは勿体ないことだし、知りたいと思ったときに知れないというのはもっと勿体ないなと思いました。

良い機会なので私の観点でのEmacsの良さを言語化しておこうと思います。Emacsのことを知りたいと思った人の助けになれば幸いです。

ちなみに、他のエディタやIDE等と優劣をつける意図はありません。他のツールにはそのツールの良いところがあると思います。また他のツールで絶対にできないことしか書かないということもありません。優しい目で見てあげてください。

## Emacsの良いところ

以下では私がEmacsを使っていて良いなと思う特徴をご紹介します。

### すべての操作がホームポジションで完結する

まずEmacsといえば何と言ってもこれではないでしょうか。マウス、矢印キー、バックスペースなど、ホームポジションから離れるような操作は原則必要ありません。基本的な操作はすべて特有のキー操作で行えるようになっています。

また、その一部の操作はmacOSの多くのアプリ（特にブラウザのテキストエリアやターミナルなど）やLinuxのターミナルなどでも使えます。Emacsでの操作に慣れることで他の場所でも一貫して効率的な操作が行えるようになるというのもメリットです。

では、以下に基本的な操作を紹介します。ただしここで `C-x` というのは「Controlを押しながらxを押す」という操作を表します。

まずはカーソル移動です。

- `C-f` : 右
- `C-b` : 左
- `C-p` : 上
- `C-n` : 下

これでホームポジションからカーソル移動ができます。他によく行う操作として以下があります。

- `C-a` : 行頭へ移動
- `C-e` : 行末へ移動
- `C-k` : 行末までを削除
- `C-y` : 削除した文字列を貼り付け
- `C-d` : カーソル上の文字を消す（Windowsでいうdeleteキーに相当）

これらはすべてMacのChromeやSafari、ターミナルで使えることを確認しています。

他にも「`C-g` : キャンセル」「`C-r` : バックワードの文字列検索」 はターミナルでもEmacsでも使えるキーバインドです。

まだまだ書ききれないくらい多くの便利なキー操作があります。また後述するようにプログラミング言語で機能を記述可能であり、さらにそれらを任意のキー操作に割り当てることもできます。このようにホームポジションからあらゆる操作が可能であるというのがEmacsの強みであると思います。


### すべてをバッファとして扱える

すべてをバッファとして扱えます。何を言っているかわからないと思いますので例を示します。

例えばGitで管理しているプロジェクトにおける開発中、昔の変更で消してしまった箇所の一部分を復元したくなった、という場面を考えます。いろいろ方法はあるかと思いますが、例えば以下のような手順が考えられます。

1. Gitクライアントで対象のコミットを探す
1. 対象のコミットの差分を表示する
1. 該当箇所をコピーする
1. エディタにペーストする

GitクライアントとしてSourceTreeとかForkとかGitKrakenとかGitHubとかgitコマンドとかいろいろありますが、実はEmacsにもGitクライアントがあります。私は [magit](https://magit.vc/) というものを使っています。Emacs上のクライアントを使うと何が良いのかというと、Gitのあらゆる操作結果がEmacsのバッファで表示されるので、Emacsのキーバインドがそのまま使えるのです。

例えばEmacs上で git log を表示すると、普段のコード上での文字列検索と同じ方法でコミットメッセージの検索ができます。そして対象コミットの差分を表示したら、普段と同じ方法でコピーしたい部分の範囲選択やコピーができます。

操作イメージを動画にしました。見るだけでは伝わりづらいかもしれませんが。

https://youtu.be/UG2eLIl0ldI

もちろんこれはGitクライアントに限りませんし、検索やコピペにも限りません。あらゆるツールをEmacs上で動かすことにより、ツールを切り替えることによるコンテキストスイッチが必要なく、ツールごとに操作方法を考える手間も最小限にすることができ、効率よく本質的な作業に集中することができるのです。

### Lispで何でも書ける

Emacsは外部拡張によりさまざまな機能追加やカスタマイズを行うことができます。拡張機能と聞けば今どきは当たり前感もありますが、Emacsの場合はユーザー設定を含むあらゆるカスタマイズをすべて一貫して Emacs Lisp というLispベースの言語で書くことができるというのが特徴です。

具体的に何が良いのかという話ですが、まず設定がプログラミング言語で書けるというのはとても便利です。キーバインドなどの設定で条件分岐やループや関数などを使えるわけですね。毎秒自動でキーバインドを変えることもできます（やりませんが）。また、設定に慣れてきたらそのまま拡張機能が自分で作れるというのもメリットです。というか設定イコール拡張であってそこに区別はありません。ちなみにEmacs自体もほぼすべてLispで書かれているので、さらに慣れてきたらEmacs自体をカスタマイズすることもできます。

ちなみにLispで表現できればいいので例えばメーラー（[Mew](https://mew.org/ja/), [mu4e](https://github.com/emacsmirror/mu4e), [notmuch](https://notmuchmail.org/notmuch-emacs/)）やブラウザ（[eww](https://www.gnu.org/software/emacs/manual/html_mono/eww.html)）もEmacs上で動きます。[音楽プレイヤー](https://www.emacswiki.org/emacs/%E3%83%9F%E3%83%A5%E3%83%BC%E3%82%B8%E3%83%83%E3%82%AF%E3%83%97%E3%83%AC%E3%82%A4%E3%83%A4%E3%83%BC)とかもあります。ちなみにEmacsでメールをするのはわりとメジャーです。

Lispで書けてしまうので外部依存も少なくなる傾向にある気がします（要出典）。init.elファイルさえ用意しておけば、新しい環境ではそれを読み込むだけでEmacsの移行が完了します。なんなら足りない外部パッケージはLispからインストールコマンドを打ってしまってもいいわけです。

あとはスクリプト言語なので例えば誰かが作ったライブラリを手元で修正して動かしてみたりということも簡単です。[GitHub上のinit.elファイル](https://github.com/search?q=path%3A%2F%28%5E%7C%5C%2F%29init%5C.el%24%2F&type=code)を見て回るのも楽しいですね。起動後にインタラクティブに設定を上書き（式を評価）することも簡単です。選択範囲だけ評価することもできます。

Emacsの拡張性の高さや無限の可能性を感じていただけたでしょうか。Emacsにハマるとカスタマイズが楽しすぎてコーディングよりもカスタマイズの時間の方が長くなること請け合いです。

## さいごに

私の思うEmacsの良さを文章化してみました。基本的にコマンド操作とカスタマイズ性というのが特徴かなと思うので、例えばVimにハマるような人にはEmacsにもハマる素質があるかなと思います（ただ既にVimを使っているのであればわざわざEmacsを学ぶインセンティブも低いかとは思います）。あとはVSCodeやIDEなどが多機能でゴテゴテしてて苦手な人とか、マウス操作よりショートカットキーの方が好みだという人にとってはかなり相性が良いと思います。

いろいろと書きましたが、結局は使ってみないと良さは伝わらないと思います。ぜひご自身でインストールして沼に飛び込んでみてください。
